!function(){"use strict";$(document).ready((function(){$("#bill_date").length&&($.datetimepicker.setLocale("ru"),$("#bill_date").datetimepicker({i18n:{de:{months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dayOfWeek:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"]}},timepicker:!1,format:"d.m.Y",theme:"white"})),$("#bill_form").validate({rules:{bill_number:{number:!0},seller_inn:{required:!0,minlength:10}},messages:{bill_number:{number:"Введите число"},seller_inn:{required:"Введите ИНН",minlength:"Обязательно для заполнения, 10-12 цифр."}}}),$(".js-add--kpp").click((function(e){e.preventDefault();var n=$(this).parent(".form-item");n.removeClass("form-item--add"),n.html('\n    <label for="seller_kpp" class="form-label">КПП</label>\n    <input class="form-input" type="number" name="seller_kpp" id="seller_kpp" minlength="9" maxlength="9">\n    ')})),$("select").niceSelect(),$(document).on("click",".form-remove",(function(e){e.preventDefault(),$(".form-remove__popup").length&&$(".form-remove__popup").remove();var n="счета";$(this).hasClass("form-remove--bill")&&(n="счета"),$(this).hasClass("form-remove--contract")&&(n="контракта"),$(this).hasClass("form-remove--side")&&(n="стороны");var t='\n    <div class="form-remove__popup">\n      <p class="form-remove__text">Вы действительно хотите удалить пункт '.concat(n,' из списка?</p>\n      <div class="form-remove__wrapper">\n        <a href="#" class="form-remove__link form-remove__link--red js-remove-line">Удалить пункт</a>\n        <a href="#" class="form-remove__link js-cancel-line">Отмена</a>\n      </div>\n    </div>\n    ');$(this).parents(".form-item--remove").append(t)})),$(document).on("click",".js-cancel-line",(function(e){e.preventDefault(),$(this).parents(".form-remove__popup").remove()})),$(document).on("click",".js-remove-line",(function(e){e.preventDefault(),$(this).parents(".form-line").remove()})),$(document).mouseup((function(e){var n=$(".form-remove__popup");n.is(e.target)||0!==n.has(e.target).length||n.remove()})),$(".js-add--contract").click((function(e){e.preventDefault();var n=$("#contract_list").children().length,t='\n    <div class="form-line form-line--flex">\n      <div class="form-item">\n        <label for="contract_name_'.concat(n,'" class="form-label">').concat(n,'</label>\n        <input class="form-input" type="text" name="contract_name_').concat(n,'" id="contract_name_').concat(n,'">\n      </div>\n\n      <div class="form-item form-item--remove">\n        <button type="button" class="form-remove form-remove--contract" title="Удалить"></button>\n      </div>\n\n    </div>\n    ');$("#add_contact").before(t)})),$("#contract_switch").on("change",(function(e){e.preventDefault();var n=$(this).parents(".bill-section"),t=n.find(".bill-section__text"),r=n.find(".bill-section__hidden");t.toggle(),r.toggle()})),$(document).on("change",".form-file__input",(function(e){var n=e.target.files[0];if(n.type.startsWith("image/")){var t=n.name,r=$(this).parents(".form-file__wrapper"),o=r.find(".form-file__text");r.addClass("form-file__wrapper--done"),o.text(t)}})),$(document).on("click",".form-file__wrapper--done .form-file__btn",(function(e){e.preventDefault();var n=$(this).parents(".form-file__wrapper"),t=n.find(".form-file__text"),r=n.find(".form-file__input");n.removeClass("form-file__wrapper--done"),t.text("Добавить подпись"),r.val("")}))}))}();